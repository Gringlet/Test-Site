<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>[CROSS/ROADS] – perpetual flyer wall</title>
<style>
/* -------------------------------- Base reset */
*{margin:0;padding:0;box-sizing:border-box}
html,body{height:100%;background:#0e0d0b;color:#f4f1e8;font-family:monospace;cursor:crosshair;overflow-x:hidden}

/* ---------- Global CSS custom props controlling decay */
:root{
 --decay:0;
 --blur:0px; --sat:1; --invert:0; --skew:0deg; --scan:0px
}
body{
 filter:blur(var(--blur)) saturate(var(--sat)) invert(var(--invert)) hue-rotate(var(--skew));
}

/* -------------------------------- Layers */
#xeroxShader,#opticSpiral{position:fixed;inset:0;pointer-events:none;z-index:0}
#opticSpiral{
 background:repeating-conic-gradient(#000 0deg 2deg,#111 2deg 4deg,#0e0d0b 4deg 8deg);
 animation:spin 40s linear infinite;opacity:.05
}
@keyframes spin{to{transform:rotate(360deg)}}

#content{position:relative;z-index:1;padding:8vmin 4vmin;min-height:200vh}

/* ---------- Graffiti burst hero */
#vitaminBurst{position:relative;height:55vh;display:flex;align-items:center;justify-content:center;overflow:hidden}
#vitaminBurst h1{font-size:clamp(2.5rem,8vw,9rem);text-transform:uppercase;mix-blend-mode:exclusion}
.burstRay{
 position:absolute;top:50%;left:50%;width:120vmax;height:4vmax;
 background:linear-gradient(90deg,transparent,rgba(255,90,0,.9) 30%,transparent 70%);
 transform-origin:0 50%;
 mix-blend-mode:screen;
}

/* ---------- Dynamic scraps */
.scrap{
 position:absolute;padding:1.2rem 1.4rem;font-size:1.1rem;line-height:1.25;
 background:#fdfbf6;border:1px solid rgba(0,0,0,.3);
 filter:grayscale(.2) contrast(.9) brightness(.95);
 box-shadow:0 8px 16px rgba(0,0,0,.6),inset 0 0 8px rgba(0,0,0,.4);
 mask:var(--mask);
 transform:rotate(var(--rot)) translateZ(0);pointer-events:none;
 user-select:none;
}
.scrap:after{/* masking‑tape */content:'';position:absolute;top:-14px;left:50%;width:68px;height:22px;background:rgba(255,255,220,.65);box-shadow:0 2px 4px rgba(0,0,0,.4);transform:translateX(-50%) rotate(var(--trot))}
@property --scan{syntax:"<length>";initial-value:0;inherits:false}
@keyframes scanShift{to{transform:translateX(var(--scan))}}
/* -------------------------------- Decay stages computed in JS */
</style>
</head>
<body>

<canvas id="xeroxShader"></canvas>
<div id="opticSpiral"></div>

<div id="content">
  <section id="vitaminBurst"><h1>Vitamin D / Crossroads</h1></section>
  <!-- collage container -->
  <section id="wall" style="position:relative;height:140vh"></section>
</div>

<script>
// ---------- click‑driven decay
let clicks=0;
addEventListener('click',()=>{
  clicks++;const r=document.documentElement;
  if(clicks%4===0){
    r.style.setProperty('--decay',clicks/4);
    r.style.setProperty('--blur',`${Math.min(clicks,10)}px`);
    r.style.setProperty('--sat',`${Math.max(.4,1-clicks*0.05)}`);
    r.style.setProperty('--invert',clicks>12?.8:clicks>8?.4:0);
    r.style.setProperty('--skew',`${Math.min(clicks*3,30)}deg`);
  }
});

// ---------- graffiti burst rays
const burst=document.getElementById('vitaminBurst');
for(let i=0;i<32;i++){
  const e=document.createElement('div');
  e.className='burstRay';
  e.style.transform=`translate(-50%,-50%) rotate(${Math.random()*360}deg) scaleX(${.4+Math.random()*1.2})`;
  e.style.opacity=0.45+Math.random()*0.35;
  burst.appendChild(e);
}

// ---------- procedural scrap generator
const wall=document.getElementById('wall');
const lorem=['▓▓█░ ░▓██','██▓░ ▓▓░█','░██▓ █░▓█','▓░██ ░▓▓█',
             'ENTROPIC PARAPRAXIS','NERE JACK','42 SCRATCH ACID','MOON WORSHIP'];
const masks=['url("data:image/svg+xml;utf8,\
<svg xmlns=\'http://www.w3.org/2000/svg\' width=\'200\' height=\'120\'><path d=\'M0 20 L15 0 H185 L200 20 V100 L185 120 H15 L0 100 Z\' fill=\'white\'/></svg>")',
             'url("data:image/svg+xml;utf8,\
<svg xmlns=\'http://www.w3.org/2000/svg\' width=\'200\' height=\'120\'><path d=\'M0 0 H200 V90 L180 120 H20 L0 90 Z\' fill=\'white\'/></svg>")'];
for(let i=0;i<20;i++){
   const s=document.createElement('div');
   s.className='scrap';
   s.style.setProperty('--rot',`${-8+Math.random()*16}deg`);
   s.style.setProperty('--trot',`${-6+Math.random()*12}deg`);
   s.style.setProperty('--mask',masks[Math.floor(Math.random()*masks.length)]);
   s.style.left=`${Math.random()*90}%`;
   s.style.top=`${Math.random()*90}%`;
   s.innerHTML=`<strong>${lorem[Math.floor(Math.random()*lorem.length)]}</strong><br>${(1+Math.floor(Math.random()*12)).toString().padStart(2,'0')}/${(1+Math.floor(Math.random()*28)).toString().padStart(2,'0')} · 8:00PM`;
   wall.appendChild(s);
}

// ---------- xerox WebGL shader (halftone + scan jitter) – minimal lib‑less
const gl=(()=>{
 const c=document.getElementById('xeroxShader');
 c.width=innerWidth;c.height=innerHeight;
 addEventListener('resize',()=>{c.width=innerWidth;c.height=innerHeight});
 return c.getContext('webgl');
})();
const vs=`attribute vec2 p;void main(){gl_Position=vec4(p,0.,1.);}`,
fs=`
precision highp float;
uniform vec2 res;uniform float t;uniform float d;
float rand(vec2 co){return fract(sin(dot(co,vec2(12.9898,78.233)))*43758.5453);}
void main(){
 vec2 uv=gl_FragCoord.xy/res;
 /* scanline wobble */
 uv.y+=sin(uv.x*80.0+t*4.0)*0.002*d;
 /* halftone dots */
 vec2 grid=uv*vec2(400.0,400.0);
 vec2 gv=fract(grid)-0.5;
 float mask=step(length(gv),0.3);
 float noise=rand(gl_FragCoord.xy+t)*0.15;
 vec3 col=mix(vec3(0.0),vec3(1.0),mask-noise);
 gl_FragColor=vec4(col,0.12);
}`;
function compile(src,type){const s=gl.createShader(type);gl.shaderSource(s,src);gl.compileShader(s);return s}
const prog=gl.createProgram();
gl.attachShader(prog,compile(vs,gl.VERTEX_SHADER));
gl.attachShader(prog,compile(fs,gl.FRAGMENT_SHADER));
gl.linkProgram(prog);gl.useProgram(prog);
const buf=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,buf);
gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),gl.STATIC_DRAW);
const loc=gl.getAttribLocation(prog,'p');gl.enableVertexAttribArray(loc);
gl.vertexAttribPointer(loc,2,gl.FLOAT,false,0,0);
const resLoc=gl.getUniformLocation(prog,'res'),
      tLoc=gl.getUniformLocation(prog,'t'),
      dLoc=gl.getUniformLocation(prog,'d');
let time=0;
function draw(){
  time+=.016;
  gl.uniform2f(resLoc,innerWidth,innerHeight);
  gl.uniform1f(tLoc,time);
  gl.uniform1f(dLoc,parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--decay')));
  gl.drawArrays(gl.TRIANGLE_STRIP,0,4);
  requestAnimationFrame(draw);
}draw();
</script>
</body>
</html>
